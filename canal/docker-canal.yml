version: "3"
services:
  canal-server:
    image: canal/canal-server:v1.1.4
    container_name: canal-server
    volumes:
      - /data/var/log/canal:/home/admin/canal-server/logs
    environment:
      ## mysql serverId
      - canal.instance.mysql.slaveId = 1234
      #position info，需要改成自己的数据库信息
      - canal.instance.master.address = 127.0.0.1:3306
      #- canal.instance.master.journal.name =
      #- canal.instance.master.position =
      #- canal.instance.master.timestamp =
      #- canal.instance.standby.address =
      #- canal.instance.standby.journal.name =
      #- canal.instance.standby.position =
      #- canal.instance.standby.timestamp =
      #username/password，需要改成自己的数据库信息
      - canal.instance.dbUsername=canal
      - canal.instance.dbPassword=canal
      - canal.instance.tsdb.enable=true
      - canal.instance.connectionCharset=UTF-8
      #admin管理指令链接的ACL配置 (v1.1.4新增)
      - canal.admin.manager=192.168.29.143
      - canal.admin.port=11110
      - canal.admin.user=admin
      - canal.admin.passwd=123456
    deploy:
      resources:
        limits:
          memory: 4096m
    networks:
      - docker-lnmp_lnmp